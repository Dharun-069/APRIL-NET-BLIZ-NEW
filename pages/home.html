<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="../assets/css/home.css">
    <link rel="stylesheet" href="../assets/css/common_style.css">
</head>

<body>




    <header>
        <div class="title">
            <a href="">NET BANKING</a>
        </div>

        <div class="full_link">
            <div>
                <a class="current_page" href="#">Home</a>
            </div>


            <div>
                <a href="./fund_transfer.html">Transfer</a>
            </div>


            <div>
                <a href="./balance_enquire.html">Balance</a>
            </div>

            <div>
                <a href="./history.html">History</a>
            </div>





            <div class="logout">
                <a href="../index.html">Log Out</a>
            </div>
        </div>


    </header>

    <main>

        <div class="welcome">

            <div class="welcome_sms">
                <span>Welcome</span>
                <span id="fname"></span>
            </div>

            <div class="search">
                <img src="../assets/img/5138de707a808fdcb21f8190a417a259.png_wh860-removebg-preview.png" alt="search">
                <label for="search"></label>
                <input type="search" id="search" name="search" placeholder="Search here">

            </div>

            <a href="../pages/account_detail.html">
                <div class="profile">
                    <img src="../assets/img/icons8-user-100.png" alt="account">
                    <div class="detail">
                        <span id="fname"></span>
                        <span>customer</span>
                    </div>

                </div>
            </a>

        </div>

        <!-- link bank account 1st container ** -->

        <div class="back_link">

            <img src="../assets/img/202101-Talent-Trends-2_xxpjxy.gif" alt="intro">
            <div class="link_bank">

                <h2>Link a bank account</h2>
                <p>You'll need to link and confirm to our bank account before you can receive Payment with Banking.
                    We'll automatically withdraw the funds in your netbanking account to the bank account </p>
                <form>
                    <label for="account"> Account number </label>
                    <input class="form-control" type="text" id="account" name="account" required>

                    <label for="ifsc"> IFSC code </label>
                    <input class="form-control" type="text" id="ifsc" name="ifsc" required>

                    <label for="phone">Phone number</label>
                    <input class="form-control" type="number" id="phone" name="phone" required>

                    <label for="pincode"> Pin code</label>
                    <input class="form-control" type="text" id="pincode" name="pincode" required>



                    <h5>Account name</h5>

                    <input type="radio" name="detail" id="personal"> <label for="personal">Personal Account</label> <br>
                    <input type="radio" name="detail" id="business"> <label for="business">Business Account</label> <br>
                    <input type="radio" name="detail" id="savings"> <label for="savings">Savings Account</label> <br>

                    <p>Remember to double-check your account number . Banks may not flag wrrors untol you transfer funds
                    </p>

                    <button type="button" class="btn btn-primary" onclick="link_bank()">Link Your Bank</button>

                </form>
            </div>

        </div>


        <!-- Show account details and hide some time ** -->

        <div class="bank_account remove_hide" id="bank_account">

            <div class="bank">
                <img src="../assets/img/account.png" alt="account">

                <div>
                    <label for="account_give">Account Number </label>
                    <input class="form-control" type="text" id="account_give" name="account_give" required>
                </div>
                <div>
                    <label for="ifsc_give">IFSC Code</label> <br>
                    <input class="form-control" type="text" id="ifsc_give" name="ifsc_give" required>
                </div>

                <div>
                    <label for="phone_give">IFSC Code</label> <br>
                    <input class="form-control" type="number" id="phone_give" name="phone_give" required>
                </div>

                <div>
                    <label for="pincode_give">IFSC Code</label> <br>
                    <input class="form-control" type="text" id="pincode_give" name="pincode_give" required>
                </div>

            </div>

        </div>

    </main>

    <footer>

        <div class="back_foot">

            <div class="direct">

                <a href="./pages/signup_page.html">Register</a>
                <a href="./pages/login_page.html">Login</a>
            </div>

            <h3>@ 2023 Net Banking</h3>



            <div class="icon_social">

                <img src="../assets/img/icons8-linkedin-100 (1).png" alt="linked in">
                <img src="../assets/img/icons8-facebook-100.png" alt="facebook">
                <img src="../assets/img/icons8-instagram-100.png" alt="insta">
                <img src="../assets/img/icons8-twitter-100.png" alt="teitter">

            </div>


        </div>

    </footer>

    <script>


        let show = JSON.parse(localStorage.getItem('array'));

        let account_name = localStorage.getItem("first_name");
        console.log(account_name);
        let check;

        show.forEach(element => { //[{0},{1},......]
            if (element["fname"] === account_name) { //e=arr[0]

                // let current_user = e //arr[5]["fname"]
                // console.log(e);

                document.querySelectorAll("#fname")[0].innerText = element["fname"] + ","//[0,1]
                document.querySelectorAll("#fname")[1].innerText = element["fname"]
                document.querySelectorAll("#ac_name").value = element["fname"]


                localStorage.setItem("array", JSON.stringify(show));
            }
        })

        function link_bank() {

            let account = document.getElementById("account").value.trim();
            let ifsc = document.getElementById("ifsc").value.trim();
            let phone = document.getElementById("phone").value.trim()
            let pincode = document.getElementById("pincode").value.trim()


            // let account_give=document.querySelectorAll("input")[1].value
            // let ifsc_give=document.querySelectorAll("input")[2].value;



            if (account != "" && ifsc != "" && phone != "" && pincode != "") {

                let account_store = {
                    "account": account,
                    "ifsc": ifsc,
                    "phone": phone,
                    "pincode": pincode,
                }

                let add_account = JSON.parse(localStorage.getItem("account_details")) ?? []; //account = []


                let res = 0;

                for (let i = 0; i < add_account.length; i++) {

                    if (add_account[i]["ifsc"] === ifsc && add_account[i]["account"] === account && add_account[i]["phone"] === phone && add_account[i]["pincode"] === pincode) {
                        res = 1;
                        break;
                    }
                }

                if (res == 1) {
                    alert(" Invalid IFSC")

                }

                else {

                    add_account.push(account_store);//[{name, email, pass}]

                    localStorage.setItem("account_details", JSON.stringify(add_account)); // account_details  :  [{name, email, pass}]

                    alert("Thanks for add account");

                    window.location.href = "#bank_account"

                }


            }

            else {
                alert("Sorry can't get a value")
            }
        }


        // let account_give = document.getElementById("account_give").value.trim();
        // let ifsc_give = document.getElementById("ifsc_give").value.trim();
        // let phone_give = document.getElementById("phone_give").value.trim()
        // let pincode_give = document.getElementById("pincode_give").value.trim()

        // let add_account = JSON.parse(localStorage.getItem("account_details")) ?? []; //account = []
    </script>


</body>



</html>